<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>libquentier: quentier::QuentierUndoCommand Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libquentier
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
   <div id="projectbrief">The library for rich desktop clients of Evernote service</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>quentier</b></li><li class="navelem"><a class="el" href="classquentier_1_1QuentierUndoCommand.html">QuentierUndoCommand</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classquentier_1_1QuentierUndoCommand-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">quentier::QuentierUndoCommand Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classquentier_1_1QuentierUndoCommand.html" title="The QuentierUndoCommand class has the sole purpose of working around one quirky aspect of Qt&#39;s undo/r...">QuentierUndoCommand</a> class has the sole purpose of working around one quirky aspect of Qt's undo/redo framework: when you push QUndoCommand to QUndoStack, it calls "redo" method of that command. This class offers subclasses to implement their own methods for actual "undo" and "redo" commands while ignoring the attempts to "redo" anything if there were no previous "undo" call prior to that.  
 <a href="classquentier_1_1QuentierUndoCommand.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="QuentierUndoCommand_8h_source.html">QuentierUndoCommand.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for quentier::QuentierUndoCommand:</div>
<div class="dyncontent">
<div class="center"><img src="classquentier_1_1QuentierUndoCommand__inherit__graph.png" border="0" usemap="#quentier_1_1QuentierUndoCommand_inherit__map" alt="Inheritance graph"/></div>
<map name="quentier_1_1QuentierUndoCommand_inherit__map" id="quentier_1_1QuentierUndoCommand_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for quentier::QuentierUndoCommand:</div>
<div class="dyncontent">
<div class="center"><img src="classquentier_1_1QuentierUndoCommand__coll__graph.png" border="0" usemap="#quentier_1_1QuentierUndoCommand_coll__map" alt="Collaboration graph"/></div>
<map name="quentier_1_1QuentierUndoCommand_coll__map" id="quentier_1_1QuentierUndoCommand_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:a5371043303dc7f1995cf91905a05f023"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5371043303dc7f1995cf91905a05f023"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>notifyError</b> (<a class="el" href="classquentier_1_1ErrorString.html">ErrorString</a> error)</td></tr>
<tr class="separator:a5371043303dc7f1995cf91905a05f023"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad6f0e22c2d173047b6f442959a7ccf70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6f0e22c2d173047b6f442959a7ccf70"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QuentierUndoCommand</b> (QUndoCommand *parent=Q_NULLPTR)</td></tr>
<tr class="separator:ad6f0e22c2d173047b6f442959a7ccf70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b28f2d5c6a8824b9064e09fc171564"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a03b28f2d5c6a8824b9064e09fc171564"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QuentierUndoCommand</b> (const QString &amp;text, QUndoCommand *parent=Q_NULLPTR)</td></tr>
<tr class="separator:a03b28f2d5c6a8824b9064e09fc171564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d384a6a6b0d75fa89c9c5b83cf20fbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d384a6a6b0d75fa89c9c5b83cf20fbe"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>undo</b> () Q_DECL_OVERRIDE Q_DECL_FINAL</td></tr>
<tr class="separator:a8d384a6a6b0d75fa89c9c5b83cf20fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c2c90029856ea440981b70706d375c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c2c90029856ea440981b70706d375c8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>redo</b> () Q_DECL_OVERRIDE Q_DECL_FINAL</td></tr>
<tr class="separator:a6c2c90029856ea440981b70706d375c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1dccdb7facd1b70c50eb832cbddc0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b1dccdb7facd1b70c50eb832cbddc0c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>onceUndoExecuted</b> () const </td></tr>
<tr class="separator:a1b1dccdb7facd1b70c50eb832cbddc0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac141b2b084e93d285e2532058c0ac940"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac141b2b084e93d285e2532058c0ac940"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>undoImpl</b> ()=0</td></tr>
<tr class="separator:ac141b2b084e93d285e2532058c0ac940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3d5f5d0d9efe400f17676103e22499"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf3d5f5d0d9efe400f17676103e22499"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>redoImpl</b> ()=0</td></tr>
<tr class="separator:aaf3d5f5d0d9efe400f17676103e22499"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classquentier_1_1QuentierUndoCommand.html" title="The QuentierUndoCommand class has the sole purpose of working around one quirky aspect of Qt&#39;s undo/r...">QuentierUndoCommand</a> class has the sole purpose of working around one quirky aspect of Qt's undo/redo framework: when you push QUndoCommand to QUndoStack, it calls "redo" method of that command. This class offers subclasses to implement their own methods for actual "undo" and "redo" commands while ignoring the attempts to "redo" anything if there were no previous "undo" call prior to that. </p>
<p>The rationale behind the current behaviour seems to be the compliance with "command pattern behaviour" when you create the command to execute the action instead of just executing it immediately. This design is enforced by Qt's undo/redo framework, there's no option to choose not to call "redo" when pushing to the stack.</p>
<p>One thing which this design fails to see is the fact that the command may be already executed externally by the moment the QUndoCommand can be created. Suppose we can get the information about how to undo (and then again redo) that command. We create the corresponding QUndoCommand, set up the stuff for its undo/redo methods and push it to QUndoStack for future use... but at the same time QUndoStack calls "redo" method of the command. Really not the behaviour you'd like to have.</p>
<p><a class="el" href="classquentier_1_1QuentierUndoCommand.html" title="The QuentierUndoCommand class has the sole purpose of working around one quirky aspect of Qt&#39;s undo/r...">QuentierUndoCommand</a> is also QObject, it is for error reporting via <a class="el" href="">notifyError</a> signal </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jan 13 2018 21:41:53 for libquentier by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
